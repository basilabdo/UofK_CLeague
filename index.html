<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯ÙˆØ±ÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { 
  box-sizing: border-box; 
}

body { 
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
  direction: rtl; 
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
  padding: 20px; 
  margin: 0;
  font-size: 14px;
  min-height: 100vh;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" width="50" height="50" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="10" cy="40" r="0.5" fill="white" opacity="0.15"/><circle cx="40" cy="10" r="0.8" fill="white" opacity="0.08"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>');
  pointer-events: none;
  z-index: 0;
}

/* Header styling */
h1 { 
  text-align: center; 
  color: white;
  text-shadow: 0 4px 8px rgba(0,0,0,0.3);
  margin: 20px 0 30px 0;
  font-size: 2.5em;
  font-weight: 800;
  position: relative;
  z-index: 2;
}

h1::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 4px;
  background: linear-gradient(90deg, #f093fb, #f5576c, #4facfe, #00f2fe);
  border-radius: 4px;
  animation: borderGlow 2s ease-in-out infinite alternate;
}

h2 { 
  text-align: center; 
  color: white;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  margin: 20px 0;
  font-size: 1.8em;
  font-weight: 700;
  position: relative;
  z-index: 2;
}

h3 { 
  font-size: 1.2em; 
  margin: 20px 0 15px 0; 
  color: #2c3e50;
  font-weight: 700;
}
    
    .section-toggle { 
  text-align: center; 
  margin-bottom: 30px; 
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  position: relative;
  z-index: 2;
}

.toggle-btn { 
  background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 100%);
  backdrop-filter: blur(15px);
  color: white; 
  border: 2px solid rgba(255,255,255,0.3);
  padding: 15px 20px; 
  border-radius: 50px; 
  cursor: pointer; 
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  font-size: 14px;
  font-weight: 600;
  min-width: 150px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  position: relative;
  overflow: hidden;
}

.toggle-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.toggle-btn:hover::before {
  left: 100%;
}

.toggle-btn:hover, .toggle-btn:active { 
  background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.2) 100%);
  transform: translateY(-3px) scale(1.05); 
  box-shadow: 
    0 15px 30px rgba(0,0,0,0.2),
    0 5px 15px rgba(255,255,255,0.1);
  border-color: rgba(255,255,255,0.5);
}

/* Section containers */
.section { 
  display: none; 
  margin-bottom: 30px; 
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(15px);
  padding: 30px; 
  border-radius: 20px; 
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.15),
    0 12px 25px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); 
  opacity: 0; 
  transform: translateY(30px);
  position: relative;
  z-index: 2;
  border: 2px solid rgba(255,255,255,0.3);
}

.section::before {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  background: linear-gradient(45deg, #f093fb 0%, #f5576c 25%, #4facfe 50%, #00f2fe 75%, #f093fb 100%);
  border-radius: 23px;
  z-index: -1;
  opacity: 0.6;
  animation: borderGlow 4s ease-in-out infinite alternate;
}

.section.active { 
  display: block; 
  opacity: 1; 
  transform: translateY(0);
  animation: slideInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
    @keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-5px);
  }
  60% {
    transform: translateY(-3px);
  }
}
.stat-card ol {
  list-style: none;
  padding: 0;
  margin: 0;
}
.stat-card li {
  display: flex;
  align-items: center;
  gap: 15px;
  margin: 10px 0;
  padding: 12px 15px;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.stat-card li:hover {
  background: rgba(102, 126, 234, 0.1);
  transform: translateX(5px);
}

.stat-card li .rank {
  width: 28px;
  height: 28px;
  text-align: center;
  font-size: 14px;
  font-weight: bold;
  border-radius: 50%;
  color: white;
  line-height: 28px;
  flex-shrink: 0;
}
    /* Ø¬Ø¯Ø§ÙˆÙ„ Ù…ØªØ¬Ø§ÙˆØ¨Ø© */
    
    /* Replace the existing table and standings styles with these */

#standingsSection {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 30px 25px;
  border-radius: 20px;
  position: relative;
  overflow: hidden;
}

#standingsSection::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23dots)"/></svg>');
  pointer-events: none;
}

#standingsSection h2 {
  color: white;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  margin-bottom: 25px;
  font-size: 2em;
  position: relative;
  z-index: 2;
}

.table-container {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(15px);
  border-radius: 20px;
  padding: 25px;
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.2),
    0 12px 25px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  position: relative;
  z-index: 2;
  margin-top: 20px;
  overflow: visible;
}

/*.table-container::before {
  content: '';
  position: absolute;
  top: -3px
  left: -3px;
  right: -3px;
  bottom: -3px;
  background: linear-gradient(45deg, #f093fb 0%, #f5576c 25%, #4facfe 50%, #00f2fe 75%, #f093fb 100%);
  border-radius: 23px;
  z-index: -1;
  opacity: 0.7;
  animation: borderGlow 3s ease-in-out infinite alternate;
}*/
@keyframes borderGlow {
  0% { opacity: 0.4; }
  100% { opacity: 0.8; }
}

table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: transparent;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: none;
  min-width: 300px;
}

/* Header styling */
thead tr {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  position: relative;
}

thead tr::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #f093fb, #f5576c, #4facfe, #00f2fe);
}

th {
  background: transparent;
  color: white;
  font-weight: 700;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  padding: 18px 12px;
  text-align: center;
  font-size: 14px;
  white-space: nowrap;
  border: none;
  position: relative;
}

th:first-child {
  border-top-left-radius: 15px;
}

th:last-child {
  border-top-right-radius: 15px;
}

/* Row styling */
tbody tr {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  position: relative;
  background: rgba(255, 255, 255, 0.8);
}

tbody tr:nth-child(even):not(.gold-row):not(.silver-row):not(.bronze-row):not(.warning-row) {
  background: rgba(248, 249, 255, 0.9);
}

tbody tr:hover {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  transform: translateX(5px) scale(1.01);
  box-shadow: 
    0 8px 25px rgba(0, 0, 0, 0.1),
    -5px 0 20px rgba(102, 126, 234, 0.2);
  z-index: 10;
}

td {
  padding: 16px 12px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  border: none;
  border-bottom: 1px solid rgba(200, 200, 200, 0.3);
  position: relative;
}

/* Medal positions styling */
tr.gold-row {
  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
  color: #8b4513;
  font-weight: 800;
  font-size: 16px;
  box-shadow: 
    0 5px 15px rgba(255, 215, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

tr.gold-row:hover {
  background: linear-gradient(135deg, #ffed4e 0%, #ffd700 100%);
  transform: translateX(8px) scale(1.02);
  box-shadow: 
    0 10px 30px rgba(255, 215, 0, 0.4),
    -8px 0 25px rgba(255, 215, 0, 0.3);
}

tr.silver-row {
  background: linear-gradient(135deg, #c0c0c0 0%, #e6e6e6 100%);
  color: #4f4f4f;
  font-weight: 800;
  font-size: 15px;
  box-shadow: 
    0 5px 15px rgba(192, 192, 192, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

tr.silver-row:hover {
  background: linear-gradient(135deg, #e6e6e6 0%, #c0c0c0 100%);
  transform: translateX(8px) scale(1.02);
  box-shadow: 
    0 10px 30px rgba(192, 192, 192, 0.4),
    -8px 0 25px rgba(192, 192, 192, 0.3);
}

tr.bronze-row {
  background: linear-gradient(135deg, #cd7f32 0%, #daa520 100%);
  color: #4a4a4a;
  font-weight: 800;
  font-size: 15px;
  box-shadow: 
    0 5px 15px rgba(205, 127, 50, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

tr.bronze-row:hover {
  background: linear-gradient(135deg, #daa520 0%, #cd7f32 100%);
  transform: translateX(8px) scale(1.02);
  box-shadow: 
    0 10px 30px rgba(205, 127, 50, 0.4),
    -8px 0 25px rgba(205, 127, 50, 0.3);
}

/* Warning zone styling */
tr.warning-row {
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
  color: white;
  font-weight: 700;
  font-size: 14px;
  box-shadow: 
    0 5px 15px rgba(255, 107, 107, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

tr.warning-row:hover {
  background: linear-gradient(135deg, #ee5a52 0%, #ff6b6b 100%);
  transform: translateX(8px) scale(1.02);
  box-shadow: 
    0 10px 30px rgba(255, 107, 107, 0.4),
    -8px 0 25px rgba(255, 107, 107, 0.3);
}

/* Name cell special styling */
td.name-cell {
  font-weight: 800;
  font-size: 16px;
  text-align: right;
  *padding-right: 20px;
}

td.name-cell span.medal {
  margin-right: 10px;
  font-size: 20px;
  display: inline-block;
  animation: sparkle 2s ease-in-out infinite;
}

@keyframes sparkle {
  0%, 100% { transform: scale(1) rotate(0deg); }
  50% { transform: scale(1.1) rotate(5deg); }
}

/* Stats columns styling */
td:nth-child(3), td:nth-child(4), td:nth-child(5), td:nth-child(6) {
  font-weight: 700;
  color: #2c3e50;
}

td:nth-child(7), td:nth-child(8) {
  font-weight: 700;
}

td:nth-child(9) {
  font-weight: 800;
  font-size: 15px;
}

td:nth-child(9):before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 60%;
  background: linear-gradient(180deg, #667eea, #764ba2);
  border-radius: 2px;
}

#standings td:last-child {
  font-weight: 900;
  font-size: 18px;
  color: #2c3e50;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  border-radius: 10px;
  margin: 3px;
  box-shadow: inset 0 2px 5px rgba(102, 126, 234, 0.2);
}

/* Loading state */
.loading {
  text-align: center;
  color: white;
  font-style: italic;
  padding: 40px;
  font-size: 18px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  position: relative;
  z-index: 2;
}

.loading:before {
  content: 'âš½';
  display: inline-block;
  margin-left: 10px;
  animation: spin 2s linear infinite;
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

  

/* Responsive design */
@media (max-width: 768px) {
  #standingsSection {
    padding: 20px 15px;
  }
  
  .table-container {
    padding: 2px 0px 0px 0px;
    border-radius: 15px;
  }
  
  th, td {
    padding: 12px 8px;
    font-size: 12px;
  }
  
  td.name-cell {
    font-size: 14px;
    padding-right: 15px;
  }
  
  td.name-cell span.medal {
    font-size: 16px;
    margin-right: 5px;
  }
  
  tbody tr:hover {
    transform: none;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }
}

@media (max-width: 480px) {
  #standingsSection h2 {
    font-size: 1.5em;
  }
  
  th, td {
    padding: 8px 6px;
    font-size: 11px;
  }
  
  td.name-cell {
    font-size: 12px;
  }
  
  td.name-cell span.medal {
    font-size: 14px;
  }
  
  td:last-child {
    font-size: 14px;
  }
}
    
    
    
    /* Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
    .form-group {
  margin: 20px 0;
  display: flex;
  flex-direction: column;
}

.form-row {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 15px;
}

.form-row>* {
  flex: 1;
  min-width: 200px;
}
label {
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 8px;
  font-size: 15px;
}
    
    select, input[type="text"], input[type="number"], input[type="password"] { 
  padding: 15px 20px; 
  margin: 5px 0; 
  border-radius: 15px; 
  border: 2px solid rgba(102, 126, 234, 0.2);
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  font-weight: 600;
}

select:focus, input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 
    0 0 0 3px rgba(102, 126, 234, 0.1),
    0 5px 15px rgba(102, 126, 234, 0.2);
  transform: translateY(-2px);
}
    
    select {
  background: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  appearance: none;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%23667eea" stroke-width="2"><polyline points="6,9 12,15 18,9"></polyline></svg>');
  background-repeat: no-repeat;
  background-position: left 15px center;
  background-size: 20px;
  padding-left: 50px;
}
    
    input[type="text"], input[type="number"], input[type="password"] {
      background-color: white;
    }
    
    .btn, button { 
  background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
  color: white; 
  border: none; 
  cursor: pointer; 
  font-weight: 700;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  min-height: 50px;
  padding: 15px 25px;
  border-radius: 15px;
  font-size: 14px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
  box-shadow: 
    0 8px 20px rgba(46, 204, 113, 0.3),
    0 3px 10px rgba(46, 204, 113, 0.2);
  position: relative;
  overflow: hidden;
}

.btn::before, button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.btn:hover::before, button:hover::before {
  left: 100%;
}

.btn:hover, .btn:active, button:hover, button:active { 
  background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
  transform: translateY(-3px) scale(1.02);
  box-shadow: 
    0 12px 30px rgba(46, 204, 113, 0.4),
    0 5px 15px rgba(46, 204, 113, 0.3);
}

.danger { 
  background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
  box-shadow: 
    0 8px 20px rgba(231, 76, 60, 0.3),
    0 3px 10px rgba(231, 76, 60, 0.2);
}
.danger:hover, .danger:active { 
  background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
  box-shadow: 
    0 12px 30px rgba(231, 76, 60, 0.4),
    0 5px 15px rgba(231, 76, 60, 0.3);
}

    
    
    .error {
  color: #e74c3c;
  background: linear-gradient(135deg, rgba(231, 76, 60, 0.1) 0%, rgba(192, 57, 43, 0.1) 100%);
  padding: 15px 20px;
  border-radius: 15px;
  margin: 15px 0;
  border: 2px solid rgba(231, 76, 60, 0.2);
  backdrop-filter: blur(10px);
  font-weight: 600;
  box-shadow: 0 5px 15px rgba(231, 76, 60, 0.1);
}

.success {
  color: #27ae60;
  background: linear-gradient(135deg, rgba(46, 204, 113, 0.1) 0%, rgba(39, 174, 96, 0.1) 100%);
  padding: 15px 20px;
  border-radius: 15px;
  margin: 15px 0;
  border: 2px solid rgba(46, 204, 113, 0.2);
  backdrop-filter: blur(10px);
  font-weight: 600;
  box-shadow: 0 5px 15px rgba(46, 204, 113, 0.1);
}
    
    .player-selector {
      position: relative;
    }
    
    .player-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(15px);
  border: 2px solid rgba(102, 126, 234, 0.2);
  border-radius: 15px;
  max-height: 200px;
  overflow-y: auto;
  z-index: 100;
  display: none;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.player-dropdown div {
  padding: 12px 20px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  border-bottom: 1px solid rgba(200, 200, 200, 0.3);
}

.player-dropdown div:hover {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  transform: translateX(5px);
}

.player-dropdown div:last-child {
  border-bottom: none;
}
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù‡Ø§ØªÙ */
    @media (max-width: 768px) {
  body {
    padding: 10px;
    font-size: 13px;
  }
  
  h1 {
    font-size: 2em;
    margin: 15px 0 20px 0;
  }
  
  .section {
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 15px;
  }
  
  .toggle-btn {
    padding: 12px 16px;
    font-size: 12px;
    min-width: 120px;
    border-radius: 25px;
  }
  
  /* Single, consistent form styling */
  select, input[type="text"], input[type="number"], input[type="password"], button, .btn { 
    padding: 12px 16px; 
    font-size: 13px;
    border-radius: 12px;
    min-height: 45px;
  }
  
  select {
    padding-left: 45px; /* For the dropdown arrow */
  }
  
  .form-row {
    flex-direction: column;
    gap: 10px;
  }

  .form-row > * {
    min-width: 100%;
  }

  .stat-card {
    min-width: 100%;
  }
}
    
    @media (max-width: 480px) {
      h1 { font-size: 1.3em; }
      h2 { font-size: 1.1em; }
      .toggle-btn { 
        padding: 8px 10px; 
        font-size: 10px;
        min-width: 80px;
      }
      th, td { 
        padding: 4px; 
        font-size: 11px;
      }
      select, button, input { 
        padding: 8px; 
        font-size: 12px;
      }
    }
    
    /* ØªØ­Ø³ÙŠÙ† Ù„Ù…Ø³ Ø§Ù„Ø´Ø§Ø´Ø© */
    @media (hover: none) {
      .toggle-btn:hover, .btn:hover, .danger:hover {
        transform: none;
      }
    }
    .top-stats-section {
  display: none;
  margin-top: 30px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(15px);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.15),
    0 12px 25px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  position: relative;
  z-index: 2;
  border: 2px solid rgba(255,255,255,0.3);
}

.top-stats-section::before {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  background: linear-gradient(45deg, #f093fb 0%, #f5576c 25%, #4facfe 50%, #00f2fe 75%, #f093fb 100%);
  border-radius: 23px;
  z-index: -1;
  opacity: 0.6;
  animation: borderGlow 4s ease-in-out infinite alternate;
}

.top-stats-cards {
  display: flex;
  flex-wrap: wrap;
  gap: 25px;
  justify-content: center;
}

.stat-card {
  flex: 1;
  min-width: 280px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 25px;
  border: 2px solid rgba(102, 126, 234, 0.1);
  box-shadow: 
    0 10px 25px rgba(0, 0, 0, 0.1),
    0 5px 15px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 
    0 15px 35px rgba(0, 0, 0, 0.15),
    0 8px 20px rgba(0, 0, 0, 0.1);
}

.stat-card h4 {
  margin-bottom: 20px;
  color: #2c3e50;
  font-size: 1.3em;
  font-weight: 700;
  border-bottom: 3px solid transparent;
  background: linear-gradient(90deg, #667eea, #764ba2) no-repeat bottom;
  background-size: 100% 3px;
  padding-bottom: 10px;
}


.gold {
  background-color: #f1c40f;
  color: #fff;
}
.silver {
  background-color: #bdc3c7;
  color: #fff;
}
.bronze {
  background-color: #d35400;
  color: #fff;
}





.bracket-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 40px;
  margin-top: 30px;
  padding: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20px;
  position: relative;
  overflow: hidden;
}
.bracket-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.15"/><circle cx="20" cy="80" r="0.5" fill="white" opacity="0.15"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
  pointer-events: none;
  }
.round {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.3);
  padding: 25px 20px;
  border-radius: 20px;
  box-shadow: 
    0 20px 40px rgba(0, 0, 0, 0.1),
    0 10px 20px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
  min-width: 280px;
  max-width: 320px;
  flex: 1;
  position: relative;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  z-index: 2;
}


.round h3 {
  text-align: center;
  margin-bottom: 20px;
  color: #2c3e50;
  font-size: 1.4em;
  font-weight: bold;
  position: relative;
  padding-bottom: 15px;
}
.round h3::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #667eea, #764ba2);
  border-radius: 3px;
}
.round::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  background: linear-gradient(45deg, #f093fb 0%, #f5576c 25%, #4facfe 50%, #00f2fe 75%, #f093fb 100%);
  border-radius: 25px;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.round:hover::before {
  opacity: 0.7;
}
.round:hover {
  transform: translateY(-10px) scale(1.02);
  box-shadow: 
    0 30px 60px rgba(0, 0, 0, 0.15),
    0 15px 30px rgba(0, 0, 0, 0.1);
}
.round#quarterFinals h3::before {
  content: 'ğŸŸï¸';
  margin-left: 8px;
}
.round#semiFinals h3::before {
  content: 'ğŸ”¥';
  margin-left: 8px;
}

.round#final h3::before {
  content: 'ğŸ‘‘';
  margin-left: 8px;
}
.match-box {
  background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
  border: 2px solid transparent;
  background-clip: padding-box;
  border-radius: 15px;
  margin-bottom: 15px;
  padding: 20px;
  font-size: 15px;
  position: relative;
  transition: all 0.3s ease;
  box-shadow:
    0 8px 25px rgba(0, 0, 0, 0.08),
    0 3px 10px rgba(0, 0, 0, 0.05);
}
.match-box::before {
  content: '';
  position: absolute;
  inset: 0;
  padding: 2px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  border-radius: 15px;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: xor;
  -webkit-mask-composite: xor;
}
.match-box:hover {
  transform: translateY(-3px);
  box-shadow: 
    0 15px 35px rgba(0, 0, 0, 0.12),
    0 6px 15px rgba(0, 0, 0, 0.08);
}
.match-box div {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 15px;
  margin: 8px 0;
  border-radius: 10px;
  background: rgba(248, 249, 255, 0.7);
  transition: all 0.3s ease;
  font-weight: 600;
}
.match-box div:first-child {
  border-top: 3px solid #667eea;
}

.match-box div:last-child {
  border-top: 3px solid #764ba2;
}

.match-box span.winner {
  font-weight: 800;
  color: #27ae60;
  text-shadow: 0 1px 2px rgba(39, 174, 96, 0.3);
  position: relative;
}

.match-box span.winner::after {
  content: 'ğŸ†';
  margin-right: 8px;
  font-size: 1.2em;
  animation: bounce 2s infinite;
}

.match-box span.loser {
  color: #95a5a6;
  opacity: 0.8;
}

.match-box div:hover {
  background: rgba(102, 126, 234, 0.1);
  transform: translateX(5px);
}
.bracket-container::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 35%;
  width: 30%;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
  z-index: 1;
}

/* Empty state styling */
.round:empty::after {
  content: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø¨Ø¹Ø¯';
  display: block;
  text-align: center;
  color: #95a5a6;
  font-style: italic;
  padding: 40px 20px;
  background: rgba(149, 165, 166, 0.1);
  border-radius: 10px;
  border: 2px dashed #bdc3c7;
}
@media (max-width: 768px) {
  .bracket-container {
    flex-direction: column;
    gap: 20px;
    padding: 15px;
  }
  
  .round {
    min-width: 100%;
    max-width: 100%;
    padding: 20px 15px;
  }
  
  .round h3 {
    font-size: 1.2em;
  }
  
  .match-box {
    padding: 15px;
    font-size: 14px;
  }
  
  .match-box div {
    padding: 10px 12px;
  }

  .bracket-container::after {
    display: none;
  }
}

@media (max-width: 480px) {
  .round {
    padding: 15px 10px;
  }
  
  .round h3 {
    font-size: 1.1em;
    margin-bottom: 15px;
  }
  
  .match-box {
    padding: 12px;
    font-size: 13px;
  }
  
  .match-box div {
    padding: 8px 10px;
  }
}
  </style>
</head>
<body>
  <h1>UofK CHANPIONS LEAGUE </h1>
  
  <div class="section-toggle">
    <button class="toggle-btn" onclick="toggleSection('standingsSection')">ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨</button>
    <button class="toggle-btn"onclick="toggleSection('roundMatchesSection')">âš½ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
    <button class="toggle-btn" onclick="toggleSection('playerMatchesSection')">ğŸ‘¤ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù„Ø§Ø¹Ø¨</button>
    <button class="toggle-btn" onclick="toggleSection('loginSection')">ğŸ”’ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù</button>
    <button class="toggle-btn" onclick="toggleSection('knockoutSection')">ğŸ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø¥Ù‚ØµØ§Ø¦ÙŠØ©</button>
  </div>
  <div id="knockoutSection" class="section">
  <h2>ğŸ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø¥Ù‚ØµØ§Ø¦ÙŠØ©</h2>
  <div class="bracket-container">
    <div class="round" id="quarterFinals">
      <h3>Ø±Ø¨Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h3>
      <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù‡Ù†Ø§ -->
    </div>
    <div class="round" id="semiFinals">
      <h3>Ù†ØµÙ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h3>
    </div>
    <div class="round" id="final">
      <h3>Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h3>
    </div>
  </div>
</div>
  <div id="standingsSection" class="section">
    <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ±ØªÙŠØ¨</h2>
    <div id="standingsLoading" class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
    <div class="table-container">
      <table id="standings" style="display: none;">
        <thead>
          <tr>
            <th>#</th>
            <th>Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
            <th>Ù„Ø¹Ø¨</th>
            <th>ÙØ§Ø²</th>
            <th>ØªØ¹Ø§Ø¯Ù„</th>
            <th>Ø®Ø³Ø±</th>
            <th>Ù„Ù‡</th>
            <th>Ø¹Ù„ÙŠÙ‡</th>
            <th>+/-</th>
            <th>Ù†Ù‚Ø§Ø·</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
<div id="topStats" class="top-stats-section">
  <h3>ğŸ† Ø£Ø¨Ø±Ø² Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª</h3>
  <div class="top-stats-cards">
    <div class="stat-card">
      <h4>ğŸ”¥ Ø£Ù‚ÙˆÙ‰ Ù‡Ø¬ÙˆÙ…</h4>
      <ol id="topAttackList"></ol>
    </div>
    <div class="stat-card">
      <h4>ğŸ›¡ï¸ Ø£Ù‚ÙˆÙ‰ Ø¯ÙØ§Ø¹</h4>
      <ol id="topDefenseList"></ol>
    </div>
  </div>
</div>
  <div id="roundMatchesSection" class="section">
    <h2>Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¬ÙˆÙ„Ø©</h2>
    <div class="form-group">
      <label>Ø§Ø®ØªØ± Ø§Ù„Ø¬ÙˆÙ„Ø©:</label>
      <select id="roundSelect"></select>
    </div>
    <div class="table-container">
      <table id="roundMatches">
        <thead>
          <tr>
            <th>Ø§Ù„Ù„Ø§Ø¹Ø¨ 1</th>
            <th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
            <th>Ø§Ù„Ù„Ø§Ø¹Ø¨ 2</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div id="playerMatchesSection" class="section">
    <h2>Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù„Ø§Ø¹Ø¨ Ù…Ø¹ÙŠÙ†</h2>
    <div class="form-group">
      <label>Ø§Ø®ØªØ± Ø§Ù„Ù„Ø§Ø¹Ø¨:</label>
      <select id="playerSelect"></select>
    </div>
    <div class="table-container">
      <table id="playerMatches">
        <thead>
          <tr>
            <th>Ø§Ù„Ø¬ÙˆÙ„Ø©</th>
            <th>Ø§Ù„Ø®ØµÙ…</th>
            <th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div class="section" id="loginSection">
    <h2>ğŸ”’ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù</h2>
    <div class="form-group">
      <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button class="btn" onclick="loginAdmin()">Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>

  <div class="section" id="adminSection">
    <h2>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù</h2>
    <div id="adminMessages"></div>
    
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨</h3>
    <div class="form-group">
      <div class="form-row">
        <input id="newPlayerName" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨">
        <button class="btn" onclick="addPlayer()">Ø¥Ø¶Ø§ÙØ©</button>
      </div>
    </div>
    
    <h3>âŒ Ø­Ø°Ù Ù„Ø§Ø¹Ø¨</h3>
    <div class="form-group">
      <div class="form-row">
        <select id="deletePlayerSelect"></select>
        <button class="btn danger" onclick="deletePlayer()">Ø­Ø°Ù</button>
      </div>
    </div>
    
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¨Ø§Ø±Ø§Ø© (Ø¨Ø¯ÙˆÙ† Ù†ØªÙŠØ¬Ø©)</h3>
    <div class="form-group">
      <div class="form-row">
        <input id="roundInput" type="number" placeholder="Ø§Ù„Ø¬ÙˆÙ„Ø©">
        <div class="player-selector">
          <select id="p1Input"></select>
          <div id="p1Dropdown" class="player-dropdown"></div>
        </div>
      </div>
      <div class="form-row">
        <div class="player-selector">
          <select id="p2Input"></select>
          <div id="p2Dropdown" class="player-dropdown"></div>
        </div>
        <button class="btn" onclick="addMatchOnly()">Ø¥Ø¶Ø§ÙØ© Ù…Ø¨Ø§Ø±Ø§Ø©</button>
      </div>
    </div>
    
    <h3>ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ù†ØªÙŠØ¬Ø© Ù…Ø¨Ø§Ø±Ø§Ø©</h3>
    <div class="form-group">
      <div class="form-row">
        <input id="resRoundInput" type="number" placeholder="Ø§Ù„Ø¬ÙˆÙ„Ø©">
        <div class="player-selector">
          <select id="resP1Input"></select>
          <div id="resP1Dropdown" class="player-dropdown"></div>
        </div>
      </div>
      <div class="form-row">
        <input id="resS1Input" type="number" placeholder="Ø§Ù„Ù†ØªÙŠØ¬Ø© 1">
        <input id="resS2Input" type="number" placeholder="Ø§Ù„Ù†ØªÙŠØ¬Ø© 2">
      </div>
      <div class="form-row">
        <div class="player-selector">
          <select id="resP2Input"></select>
          <div id="resP2Dropdown" class="player-dropdown"></div>
        </div>
        <button class="btn" onclick="addMatchResult()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
      </div>
    </div>
    
    <h3>âš™ï¸ ØªØ¹Ø¯ÙŠÙ„ / Ø­Ø°Ù Ù…Ø¨Ø§Ø±Ø§Ø©</h3>
    <div class="form-group">
      <select id="editMatchSelect"></select>
      <div class="form-row">
        <input id="editScore1" type="number" placeholder="Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ 1">
        <input id="editScore2" type="number" placeholder="Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ 2">
      </div>
      <div class="form-row">
        <button class="btn" onclick="editSelectedMatch()">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
        <button class="btn danger" onclick="deleteSelectedMatch()">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©</button>
      </div>
    </div>
    <hr>
<h3>ğŸ† Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ø¥Ù‚ØµØ§Ø¦ÙŠØ©</h3>

<div class="form-group">
  <div class="form-row">
    <select id="knockoutStageSelect">
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆØ±</option>
      <option value="quarter">Ø±Ø¨Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</option>
      <option value="semi">Ù†ØµÙ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</option>
      <option value="final">Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</option>
    </select>
  </div>
  <div class="form-row">
    <select id="knockoutP1Select"></select>
    <select id="knockoutP2Select"></select>
  </div>
  <div class="form-row">
    <input type="number" id="knockoutS1" placeholder="Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ 1">
    <input type="number" id="knockoutS2" placeholder="Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ 2">
  </div>
  <div class="form-row">
    <button class="btn" onclick="addKnockoutMatch()">â• Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„</button>
    <button class="btn danger" onclick="deleteKnockoutMatch()">ğŸ—‘ï¸ Ø­Ø°Ù</button>
  </div>
</div>
  </div>

  <script type="module">
    // Firebase configuration
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, doc, setDoc, deleteDoc, addDoc, updateDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyB0kjjxizHCG6MIAF-pb5plTPAgo4GV9xU",
      authDomain: "uofk-f3ad4.firebaseapp.com",
      projectId: "uofk-f3ad4",
      storageBucket: "uofk-f3ad4.appspot.com",
      messagingSenderId: "610874445559",
      appId: "1:610874445559:web:ae05cc8676e22b242ecdf2"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let players = [];
    let matches = [];
    let knockoutMatches = [];

    // Show message to user
    function showMessage(message, type = 'success') {
      const messagesDiv = document.getElementById('adminMessages');
      if (messagesDiv) {
        messagesDiv.innerHTML = `<div class="${type}">${message}</div>`;
        setTimeout(() => {
          messagesDiv.innerHTML = '';
        }, 3000);
      }
    }

    // Load players from Firebase
    async function loadPlayers() {
      try {
        const querySnapshot = await getDocs(collection(db, 'players'));
        players = [];
        querySnapshot.forEach((doc) => {
          players.push({ id: doc.id, name: doc.data().name });
        });
      } catch (error) {
        console.error('Error loading players:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†', 'error');
      }
    }

    // Load matches from Firebase
    async function loadMatches() {
      try {
        const querySnapshot = await getDocs(collection(db, 'matches'));
        matches = [];
        querySnapshot.forEach((doc) => {
          matches.push({ id: doc.id, ...doc.data() });
        });
      } catch (error) {
        console.error('Error loading matches:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª', 'error');
      }
    }

    // Add player to Firebase
    async function addPlayer() {
      const name = document.getElementById("newPlayerName").value.trim();
      if (!name) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨', 'error');
        return;
      }

      // Check if player already exists
      if (players.some(p => p.name === name)) {
        showMessage('Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„', 'error');
        return;
      }

      try {
        await addDoc(collection(db, 'players'), { name: name });
        showMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
        document.getElementById("newPlayerName").value = "";
        await init();
      } catch (error) {
        console.error('Error adding player:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨', 'error');
      }
    }

    // Delete player from Firebase
    async function deletePlayer() {
      const select = document.getElementById("deletePlayerSelect");
      const selectedPlayerId = select.value;
      
      if (!selectedPlayerId) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù„Ø§Ø¹Ø¨ Ù„Ù„Ø­Ø°Ù', 'error');
        return;
      }

      if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙˆÙƒÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§ØªÙ‡ØŸ")) {
        return;
      }

      try {
        const player = players.find(p => p.id === selectedPlayerId);
        
        // Delete player
        await deleteDoc(doc(db, 'players', selectedPlayerId));
        
        // Delete all matches involving this player
        const playerMatches = matches.filter(m => m.p1 === player.name || m.p2 === player.name);
        for (const match of playerMatches) {
          await deleteDoc(doc(db, 'matches', match.id));
        }
        
        showMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙˆÙ…Ø¨Ø§Ø±ÙŠØ§ØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­');
        await init();
      } catch (error) {
        console.error('Error deleting player:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù„Ø§Ø¹Ø¨', 'error');
      }
    }

    // Add match to Firebase
    async function addMatchOnly() {
      const round = parseInt(document.getElementById("roundInput").value);
      const p1 = document.getElementById("p1Input").value.trim();
      const p2 = document.getElementById("p2Input").value.trim();
      
      if (!round || !p1 || !p2) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
        return;
      }

      if (p1 === p2) {
        showMessage('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù„Ø§Ø¹Ø¨ 1 Ù‡Ùˆ Ù†ÙØ³Ù‡ Ø§Ù„Ù„Ø§Ø¹Ø¨ 2', 'error');
        return;
      }

      try {
        await addDoc(collection(db, 'matches'), {
          round: round,
          p1: p1,
          p2: p2,
          s1: null,
          s2: null
        });
        
        showMessage('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­');
        document.getElementById("roundInput").value = "";
        document.getElementById("p1Input").value = "";
        document.getElementById("p2Input").value = "";
        await init();
      } catch (error) {
        console.error('Error adding match:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©', 'error');
      }
    }

    // Add match result
    async function addMatchResult() {
      const round = parseInt(document.getElementById("resRoundInput").value);
      const p1 = document.getElementById("resP1Input").value.trim();
      const p2 = document.getElementById("resP2Input").value.trim();
      const s1 = parseInt(document.getElementById("resS1Input").value);
      const s2 = parseInt(document.getElementById("resS2Input").value);
      
      if (!round || !p1 || !p2 || isNaN(s1) || isNaN(s2)) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'error');
        return;
      }

      try {
        // Search for match in both directions (p1 vs p2 and p2 vs p1)
        let match = matches.find(m => m.round === round && (
          (m.p1 === p1 && m.p2 === p2) || (m.p1 === p2 && m.p2 === p1)
        ));
        
        if (!match) {
          showMessage('Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.', 'error');
          return;
        }

        // Adjust scores if players are reversed
        const isReversed = match.p1 === p2 && match.p2 === p1;
        
        await updateDoc(doc(db, 'matches', match.id), {
          s1: isReversed ? s2 : s1,
          s2: isReversed ? s1 : s2
        });
        
        showMessage('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­');
        ["resRoundInput", "resP1Input", "resP2Input", "resS1Input", "resS2Input"].forEach(id => {
          document.getElementById(id).value = "";
        });
        await init();
      } catch (error) {
        console.error('Error updating match result:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø©', 'error');
      }
    }

    // Edit selected match
    async function editSelectedMatch() {
      const select = document.getElementById("editMatchSelect");
      const matchId = select.value;
      const s1 = parseInt(document.getElementById("editScore1").value);
      const s2 = parseInt(document.getElementById("editScore2").value);
      
      if (!matchId || isNaN(s1) || isNaN(s2)) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¨Ø§Ø±Ø§Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ù†ØªØ§Ø¦Ø¬ ØµØ­ÙŠØ­Ø©', 'error');
        return;
      }

      try {
        await updateDoc(doc(db, 'matches', matchId), {
          s1: s1,
          s2: s2
        });
        
        showMessage('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­');
        document.getElementById("editScore1").value = "";
        document.getElementById("editScore2").value = "";
        await init();
      } catch (error) {
        console.error('Error editing match:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©', 'error');
      }
    }

    // Delete selected match
    async function deleteSelectedMatch() {
      const select = document.getElementById("editMatchSelect");
      const matchId = select.value;
      
      if (!matchId) {
        showMessage('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¨Ø§Ø±Ø§Ø© Ù„Ù„Ø­Ø°Ù', 'error');
        return;
      }

      if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ")) {
        return;
      }

      try {
        await deleteDoc(doc(db, 'matches', matchId));
        showMessage('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­');
        await init();
      } catch (error) {
        console.error('Error deleting match:', error);
        showMessage('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©', 'error');
      }
    }

    function toggleSection(id) {
  document.querySelectorAll('.section').forEach(section => {
    section.classList.remove('active');
  });
  document.getElementById(id).classList.add('active');

  // Ø¥Ø¸Ù‡Ø§Ø± Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…ÙØªÙˆØ­
  const topStats = document.getElementById('topStats');
  if (id === 'knockoutSection') renderKnockoutBracket();
  if (id === 'standingsSection') {
    topStats.style.display = 'block';
  } else {
    topStats.style.display = 'none';
    }
  }

    function calculateStandings() {
  const stats = {};
  players.forEach(p => {
    stats[p.name] = { 
      played: 0, 
      won: 0, 
      draw: 0, 
      lost: 0, 
      pts: 0,
      goalsFor: 0,
      goalsAgainst: 0
    };
  });

  matches.forEach(m => {
    if (!stats[m.p1] || !stats[m.p2] || m.s1 == null || m.s2 == null) return;

    stats[m.p1].played++;
    stats[m.p2].played++;

    stats[m.p1].goalsFor += m.s1;
    stats[m.p1].goalsAgainst += m.s2;

    stats[m.p2].goalsFor += m.s2;
    stats[m.p2].goalsAgainst += m.s1;

    if (m.s1 > m.s2) {
      stats[m.p1].won++;
      stats[m.p2].lost++;
      stats[m.p1].pts += 3;
    } else if (m.s1 < m.s2) {
      stats[m.p2].won++;
      stats[m.p1].lost++;
      stats[m.p2].pts += 3;
    } else {
      stats[m.p1].draw++;
      stats[m.p2].draw++;
      stats[m.p1].pts += 1;
      stats[m.p2].pts += 1;
    }
  });

  // Ø­Ø³Ø§Ø¨ Ø£Ù‚ÙˆÙ‰ 3 Ù‡Ø¬ÙˆÙ…
  const topAttack = players
    .map(p => ({ name: p.name, gf: stats[p.name].goalsFor }))
    .sort((a, b) => b.gf - a.gf)
    .slice(0, 3);

  // Ø­Ø³Ø§Ø¨ Ø£Ù‚ÙˆÙ‰ 3 Ø¯ÙØ§Ø¹
  const topDefense = players
    .map(p => ({ name: p.name, ga: stats[p.name].goalsAgainst }))
    .sort((a, b) => a.ga - b.ga)
    .slice(0, 3);

  const medals = ["ğŸ¥‡", "ğŸ¥ˆ", "ğŸ¥‰"];
  const medalClasses = ["gold", "silver", "bronze"];

  const topAttackList = document.getElementById("topAttackList");
  const topDefenseList = document.getElementById("topDefenseList");

  topAttackList.innerHTML = topAttack.map((p, i) =>
    `<li class="${medalClasses[i] || ''}">
      <span class="rank ${medalClasses[i] || ''}">${i + 1}</span>
      ${medals[i] || ''} <strong>${p.name}</strong> â€” ${p.gf} Ù‡Ø¯Ù${p.gf !== 1 ? 'Ù‹Ø§' : ''}
    </li>`
  ).join("");

  topDefenseList.innerHTML = topDefense.map((p, i) =>
    `<li class="${medalClasses[i] || ''}">
      <span class="rank ${medalClasses[i] || ''}">${i + 1}</span>
      ${medals[i] || ''} <strong>${p.name}</strong> â€” Ø§Ø³ØªÙ‚Ø¨Ù„ ${p.ga} Ù‡Ø¯Ù${p.ga !== 1 ? 'Ù‹Ø§' : ''}
    </li>`
  ).join("");

  const sorted = players.slice().sort((a, b) => {
    if (stats[b.name].pts !== stats[a.name].pts) {
      return stats[b.name].pts - stats[a.name].pts;
    }
    const diffA = stats[a.name].goalsFor - stats[a.name].goalsAgainst;
    const diffB = stats[b.name].goalsFor - stats[b.name].goalsAgainst;
    return diffB - diffA;
  });

  const tbody = document.querySelector("#standings tbody");
  tbody.innerHTML = "";

  sorted.forEach((p, i) => {
  const s = stats[p.name];
  const goalDiff = s.goalsFor - s.goalsAgainst;

  let rankClass = '';
if (i === 0) rankClass = 'gold-row';
else if (i === 1) rankClass = 'silver-row';
else if (i === 2) rankClass = 'bronze-row';
else if (i >= sorted.length - 6) rankClass = 'warning-row'; // Ø¢Ø®Ø± 6 Ù…Ø±Ø§ÙƒØ²
  const medalIcon = i === 0 ? 'ğŸ¥‡' : i === 1 ? 'ğŸ¥ˆ' : i === 2 ? 'ğŸ¥‰' : (i >= sorted.length - 6 ? 'âš ï¸' : '');

  tbody.innerHTML += `
    <tr class="${rankClass}">
      <td>${i + 1}</td>
      <td class="name-cell"><strong>${p.name}</strong> <span class="medal">${medalIcon}</span></td>
      <td>${s.played}</td>
      <td>${s.won}</td>
      <td>${s.draw}</td>
      <td>${s.lost}</td>
      <td>${s.goalsFor}</td>
      <td>${s.goalsAgainst}</td>
      <td>${goalDiff > 0 ? '+' : ''}${goalDiff}</td>
      <td>${s.pts}</td>
    </tr>`;
});

  document.getElementById('standingsLoading').style.display = 'none';
  document.getElementById('standings').style.display = 'table';
}

    function loadOptions() {
  // Handle round options
  const roundSelect = document.getElementById("roundSelect");
  const rounds = [...new Set(matches.map(m => m.round))];
  roundSelect.innerHTML = "";
  rounds.sort((a, b) => a - b).forEach(r => {
    roundSelect.innerHTML += `<option value="${r}">Ø§Ù„Ø¬ÙˆÙ„Ø© ${r}</option>`;
  });
  
  // Handle knockout player selects (FIXED - moved outside the rounds loop)
  const k1 = document.getElementById("knockoutP1Select");
  const k2 = document.getElementById("knockoutP2Select");
  [k1, k2].forEach(select => {
    select.innerHTML = "<option value='' disabled selected>Ø§Ø®ØªØ± Ù„Ø§Ø¹Ø¨Ù‹Ø§</option>";
    players.forEach(p => {
      const opt = document.createElement("option");
      opt.value = p.name;
      opt.textContent = p.name;
      select.appendChild(opt);
    });
  });
  
  // Handle regular player selects
  const playerSelect = document.getElementById("playerSelect");
  const deleteSelect = document.getElementById("deletePlayerSelect");
  const p1Input = document.getElementById("p1Input");
  const p2Input = document.getElementById("p2Input");
  const resP1Input = document.getElementById("resP1Input");
  const resP2Input = document.getElementById("resP2Input");
  
  [p1Input, p2Input, resP1Input, resP2Input].forEach(select => {
    select.innerHTML = "<option value='' disabled selected>Ø§Ø®ØªØ± Ù„Ø§Ø¹Ø¨Ù‹Ø§</option>";
    players.forEach(p => {
      const option = document.createElement("option");
      option.value = p.name;
      option.textContent = p.name;
      select.appendChild(option);
    });
  });
  
  // Handle player and delete selects
  playerSelect.innerHTML = "";
  deleteSelect.innerHTML = "";
  players.forEach(p => {
    playerSelect.innerHTML += `<option value="${p.name}">${p.name}</option>`;
    deleteSelect.innerHTML += `<option value="${p.id}">${p.name}</option>`;
  });
  
  // Handle edit match select
  const editMatchSelect = document.getElementById("editMatchSelect");
  editMatchSelect.innerHTML = "";
  matches.forEach((m) => {
    const label = `Ø§Ù„Ø¬ÙˆÙ„Ø© ${m.round} - ${m.p1} Ø¶Ø¯ ${m.p2} ${m.s1 != null ? `(${m.s1}-${m.s2})` : ''}`;
    editMatchSelect.innerHTML += `<option value="${m.id}">${label}</option>`;
  });
}
    async function loadKnockoutMatches() {
  try {
    const snapshot = await getDocs(collection(db, 'knockoutMatches'));
    knockoutMatches = [];
    snapshot.forEach(doc => {
      knockoutMatches.push({ id: doc.id, ...doc.data() });
    });
  } catch (error) {
    console.error("Error loading knockout matches:", error);
    showMessage("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¥Ù‚ØµØ§Ø¡", "error");
  }
}
    async function addKnockoutMatch() {
  const stage = document.getElementById("knockoutStageSelect").value;
  const p1 = document.getElementById("knockoutP1Select").value;
  const p2 = document.getElementById("knockoutP2Select").value;
  const s1Input = document.getElementById("knockoutS1").value;
const s2Input = document.getElementById("knockoutS2").value;

const s1 = s1Input === '' ? null : parseInt(s1Input);
const s2 = s2Input === '' ? null : parseInt(s2Input);

  if (!stage || !p1 || !p2) {
    showMessage("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª", "error");
    return;
  }

  const existing = knockoutMatches.find(m => m.stage === stage && (
    (m.p1 === p1 && m.p2 === p2) || (m.p1 === p2 && m.p2 === p1)
  ));

  try {
    if (existing) {
      await updateDoc(doc(db, 'knockoutMatches', existing.id), { p1, p2, s1, s2 });
      showMessage("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­");
    } else {
      await addDoc(collection(db, 'knockoutMatches'), { stage, p1, p2, s1, s2 });
      showMessage("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­");
    }

    // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
    ["knockoutStageSelect", "knockoutP1Select", "knockoutP2Select", "knockoutS1", "knockoutS2"]
      .forEach(id => document.getElementById(id).value = "");

    await init(); // Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«
  } catch (error) {
    console.error("Error saving knockout match:", error);
    showMessage("ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©", "error");
  }
}
async function deleteKnockoutMatch() {
  const stage = document.getElementById("knockoutStageSelect").value;
  const p1 = document.getElementById("knockoutP1Select").value;
  const p2 = document.getElementById("knockoutP2Select").value;

  if (!stage || !p1 || !p2) {
    showMessage("ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ù„Ù„Ø­Ø°Ù", "error");
    return;
  }

  const match = knockoutMatches.find(m => m.stage === stage && (
    (m.p1 === p1 && m.p2 === p2) || (m.p1 === p2 && m.p2 === p1)
  ));

  if (!match) {
    showMessage("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©", "error");
    return;
  }

  if (!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ")) return;

  try {
    await deleteDoc(doc(db, 'knockoutMatches', match.id));
    showMessage("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­");
    await init();
  } catch (error) {
    console.error("Error deleting knockout match:", error);
    showMessage("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©", "error");
  }
}

    function loadRoundMatches() {
      const round = Number(document.getElementById("roundSelect").value);
      const tbody = document.querySelector("#roundMatches tbody");
      tbody.innerHTML = "";
      matches.filter(m => m.round === round).forEach(m => {
        const result = (m.s1 != null && m.s2 != null) ? `${m.s1} - ${m.s2}` : "-";
        tbody.innerHTML += `<tr><td>${m.p1}</td><td>${result}</td><td>${m.p2}</td></tr>`;
      });
    }

    function loadPlayerMatches() {
      const name = document.getElementById("playerSelect").value;
      const tbody = document.querySelector("#playerMatches tbody");
      tbody.innerHTML = "";
      matches
  .filter(m => m.p1 === name || m.p2 === name)
  .sort((a, b) => a.round - b.round) // â† Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø¬ÙˆÙ„Ø©
  .forEach(m => {
    const opponent = m.p1 === name ? m.p2 : m.p1;
    const score = (m.s1 != null && m.s2 != null) ?
      (m.p1 === name ? `${m.s1} - ${m.s2}` : `${m.s2} - ${m.s1}`) :
      "-";
    tbody.innerHTML += `<tr><td>Ø§Ù„Ø¬ÙˆÙ„Ø© ${m.round}</td><td>${opponent}</td><td>${score}</td></tr>`;
  });
    }

    function loginAdmin() {
      const password = document.getElementById("adminPassword").value;
      if (password === "admin123") {
        toggleSection('adminSection');
      } else {
        alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
      }
    }
    function renderKnockoutBracket() {
  const stages = {
    quarter: document.getElementById('quarterFinals'),
    semi: document.getElementById('semiFinals'),
    final: document.getElementById('final')
  };

  Object.values(stages).forEach(stage => {
    stage.querySelectorAll('.match-box').forEach(e => e.remove());
  });

  const sortedMatches = knockoutMatches.sort((a, b) => {
    const order = { quarter: 1, semi: 2, final: 3 };
    return order[a.stage] - order[b.stage];
  });

  sortedMatches.forEach(m => {
    const winner = m.s1 > m.s2 ? m.p1 : m.s2 > m.s1 ? m.p2 : null;

    const matchHTML = `
      <div class="match-box">
        <div><span class="${winner === m.p1 ? 'winner' : 'loser'}">${m.p1}</span> ${m.s1 != null ? m.s1 : ''}</div>
        <div><span class="${winner === m.p2 ? 'winner' : 'loser'}">${m.p2}</span> ${m.s2 != null ? m.s2 : ''}</div>
      </div>
    `;

    stages[m.stage].insertAdjacentHTML('beforeend', matchHTML);
  });
  }
    // Show player dropdown when input is focused
    function showPlayerDropdown(inputId) {
      const dropdownId = inputId + 'Dropdown';
      const dropdown = document.getElementById(dropdownId);
      dropdown.innerHTML = '';
      
      players.forEach(player => {
        const div = document.createElement('div');
        div.textContent = player.name;
        div.onclick = () => {
          document.getElementById(inputId).value = player.name;
          dropdown.style.display = 'none';
        };
        dropdown.appendChild(div);
      });
      
      dropdown.style.display = 'block';
      
      // Hide dropdown when clicking outside
      document.addEventListener('click', function hideDropdown(e) {
        if (!e.target.closest('.player-selector')) {
          dropdown.style.display = 'none';
          document.removeEventListener('click', hideDropdown);
        }
      });
    }

    async function init() {
      await loadPlayers();
      await loadMatches();
      await loadKnockoutMatches();
      loadOptions();
      calculateStandings();
      loadRoundMatches();
      loadPlayerMatches();
      
      document.getElementById("roundSelect").onchange = loadRoundMatches;
      document.getElementById("playerSelect").onchange = loadPlayerMatches;
    }

    // Make functions available globally
    window.toggleSection = toggleSection;
    window.addPlayer = addPlayer;
    window.deletePlayer = deletePlayer;
    window.addMatchOnly = addMatchOnly;
    window.addMatchResult = addMatchResult;
    window.editSelectedMatch = editSelectedMatch;
    window.deleteSelectedMatch = deleteSelectedMatch;
    window.loginAdmin = loginAdmin;
    window.loadRoundMatches = loadRoundMatches;
    window.loadPlayerMatches = loadPlayerMatches;
    window.showPlayerDropdown = showPlayerDropdown;
    window.addKnockoutMatch = addKnockoutMatch;
    window.deleteKnockoutMatch = deleteKnockoutMatch;
    // Initialize the app
    window.onload = init;
  </script>
</body>
</html>
